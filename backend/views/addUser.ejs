<div class='container centered-page' id="settings">

  <h1 class="ui header violet centered">  
    Create New User
  </h1>

  <div class="ui segment raised">
    <form class="ui form add-user" action="/add-user" method="POST">
      <h3 class="ui header centered">New User's Email Address</h3>
      <div class="email">
        <div class="ui field">
          <input type="email" name="email" placeholder="Email" aria-label="email" required />
        </div>
      </div>
      <h3 class="ui header centered">Temporary Password</h3>
      <div class="email">
        <div class="ui field">
          <input type="text" name="password" aria-label="password" placeholder="Password" required />
        </div>
      </div>
      <h3 class="ui header centered">Role</h3>
      <div class="ui field">
        <select name="role" id="role-select" style="width:100%; padding:.67em 1em; border:1px solid rgba(34,36,38,.15); border-radius:.29em; font-size:1em;">
          <option value="user">Admin (full access)</option>
          <option value="org">Organization (edit own listings only)</option>
        </select>
      </div>

      <div id="listing-assignment" style="display: none; margin-top: 1em;">
        <h3 class="ui header centered">Assign Listings</h3>
        <p style="text-align:center; color:#888; font-size:.9em;">Select the listing(s) this org user should manage. Hold Ctrl/Cmd to select multiple.</p>
        <div class="ui field">
          <select name="listing_guids" multiple id="listing-select" size="8" style="width:100%; padding:.5em; border:1px solid rgba(34,36,38,.15); border-radius:.29em; font-size:1em;">
            <% if (props.listings) { %>
              <% props.listings.forEach(function(l) { %>
                <option value="<%= l.guid %>"><%= l.full_name %> (<%= l.city || 'No city' %>)</option>
              <% }) %>
            <% } %>
          </select>
        </div>
      </div>

      <button class="ui button fluid violet" style="margin-top: 2em;">Submit</button>
    </form>
  </div>
</div>

<script>
  document.getElementById('role-select').addEventListener('change', function() {
    document.getElementById('listing-assignment').style.display = this.value === 'org' ? 'block' : 'none';
  });
</script>